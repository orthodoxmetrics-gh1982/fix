2025-07-22T09:23:00: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:23:00: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T09:23:01: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:23:01: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:23:25: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T09:23:25: ⚠️ Record request without church context
2025-07-22T09:23:25: ⚠️ Record request without church context
2025-07-22T09:27:48: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T09:27:48: ⚠️ Record request without church context
2025-07-22T09:27:48: ⚠️ Record request without church context
2025-07-22T09:28:05: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T09:28:05: ⚠️ Record request without church context
2025-07-22T09:28:05: ⚠️ Record request without church context
2025-07-22T09:28:41: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T09:28:41: ⚠️ Record request without church context
2025-07-22T09:28:41: ⚠️ Record request without church context
2025-07-22T09:40:47: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:40:48: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T09:40:49: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:40:49: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:43:31: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:43:31: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T09:43:32: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:43:32: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:43:43: ❌ Build process failed: Error: Command failed: cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build
2025-07-22T09:43:43: npm warn Unknown cli config "--legacy-deps". This will stop working in the next major version of npm.
2025-07-22T09:43:43: npm warn ERESOLVE overriding peer dependency
2025-07-22T09:43:43: npm warn While resolving: @mui/base@5.0.0-beta.58
2025-07-22T09:43:43: npm warn Found: @types/react@19.0.1
2025-07-22T09:43:43: npm warn node_modules/@types/react
2025-07-22T09:43:43: npm warn   dev @types/react@"19.0.1" from the root project
2025-07-22T09:43:43: npm warn   33 more (@mui/utils, @mui/icons-material, @mui/lab, ...)
2025-07-22T09:43:43: npm warn
2025-07-22T09:43:43: npm warn Could not resolve dependency:
2025-07-22T09:43:43: npm warn peerOptional @types/react@"^17.0.0 || ^18.0.0" from @mui/base@5.0.0-beta.58
2025-07-22T09:43:43: npm warn node_modules/@mui/base
2025-07-22T09:43:43: npm warn   @mui/base@"5.0.0-beta.58" from @mui/lab@6.0.0-beta.10
2025-07-22T09:43:43: npm warn   node_modules/@mui/lab
2025-07-22T09:43:43: npm warn
2025-07-22T09:43:43: npm warn Conflicting peer dependency: @types/react@18.3.23
2025-07-22T09:43:43: npm warn node_modules/@types/react
2025-07-22T09:43:43: npm warn   peerOptional @types/react@"^17.0.0 || ^18.0.0" from @mui/base@5.0.0-beta.58
2025-07-22T09:43:43: npm warn   node_modules/@mui/base
2025-07-22T09:43:43: npm warn     @mui/base@"5.0.0-beta.58" from @mui/lab@6.0.0-beta.10
2025-07-22T09:43:43: npm warn     node_modules/@mui/lab
2025-07-22T09:43:43: npm error code ERESOLVE
2025-07-22T09:43:43: npm error ERESOLVE could not resolve
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error While resolving: @mui/icons-material@5.18.0
2025-07-22T09:43:43: npm error Found: @mui/material@7.2.0
2025-07-22T09:43:43: npm error node_modules/@mui/material
2025-07-22T09:43:43: npm error   @mui/material@"^7.2.0" from the root project
2025-07-22T09:43:43: npm error   peer @mui/material@"^5.15.14 || ^6.0.0 || ^7.0.0" from @mui/x-tree-view@7.29.1
2025-07-22T09:43:43: npm error   node_modules/@mui/x-tree-view
2025-07-22T09:43:43: npm error     @mui/x-tree-view@"^7.18.0" from the root project
2025-07-22T09:43:43: npm error   3 more (formik-mui, mui-tiptap, tss-react)
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error Could not resolve dependency:
2025-07-22T09:43:43: npm error peer @mui/material@"^5.0.0" from @mui/icons-material@5.18.0
2025-07-22T09:43:43: npm error node_modules/@mui/icons-material
2025-07-22T09:43:43: npm error   @mui/icons-material@"^5.14.13" from the root project
2025-07-22T09:43:43: npm error   peer @mui/icons-material@"^5.0.0 || ^6.0.0 || ^7.0.0" from mui-tiptap@1.21.0
2025-07-22T09:43:43: npm error   node_modules/mui-tiptap
2025-07-22T09:43:43: npm error     mui-tiptap@"^1.13.0" from the root project
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error Conflicting peer dependency: @mui/material@5.18.0
2025-07-22T09:43:43: npm error node_modules/@mui/material
2025-07-22T09:43:43: npm error   peer @mui/material@"^5.0.0" from @mui/icons-material@5.18.0
2025-07-22T09:43:43: npm error   node_modules/@mui/icons-material
2025-07-22T09:43:43: npm error     @mui/icons-material@"^5.14.13" from the root project
2025-07-22T09:43:43: npm error     peer @mui/icons-material@"^5.0.0 || ^6.0.0 || ^7.0.0" from mui-tiptap@1.21.0
2025-07-22T09:43:43: npm error     node_modules/mui-tiptap
2025-07-22T09:43:43: npm error       mui-tiptap@"^1.13.0" from the root project
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error Fix the upstream dependency conflict, or retry
2025-07-22T09:43:43: npm error this command with --force or --legacy-peer-deps
2025-07-22T09:43:43: npm error to accept an incorrect (and potentially broken) dependency resolution.
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error
2025-07-22T09:43:43: npm error For a full report see:
2025-07-22T09:43:43: npm error /root/.npm/_logs/2025-07-22T13_43_41_430Z-eresolve-report.txt
2025-07-22T09:43:43: npm error A complete log of this run can be found in: /root/.npm/_logs/2025-07-22T13_43_41_430Z-debug-0.log
2025-07-22T09:43:43: 
2025-07-22T09:43:43:     at genericNodeError (node:internal/errors:983:15)
2025-07-22T09:43:43:     at wrappedFn (node:internal/errors:537:14)
2025-07-22T09:43:43:     at ChildProcess.exithandler (node:child_process:414:12)
2025-07-22T09:43:43:     at ChildProcess.emit (node:events:518:28)
2025-07-22T09:43:43:     at maybeClose (node:internal/child_process:1101:16)
2025-07-22T09:43:43:     at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
2025-07-22T09:43:43:   code: 1,
2025-07-22T09:43:43:   killed: false,
2025-07-22T09:43:43:   signal: null,
2025-07-22T09:43:43:   cmd: 'cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build'
2025-07-22T09:43:43: }
2025-07-22T09:53:17: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:53:18: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T09:53:19: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:53:19: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:56:37: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:56:37: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T09:56:39: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:56:39: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T09:57:47: 🚨 FRONTEND BUILD FAILED 🚨
2025-07-22T09:57:47: ❌ Build process failed: Error: Command failed: cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build
2025-07-22T09:57:47: sh: 1: vite: not found
2025-07-22T09:57:47: 
2025-07-22T09:57:47:     at genericNodeError (node:internal/errors:983:15)
2025-07-22T09:57:47:     at wrappedFn (node:internal/errors:537:14)
2025-07-22T09:57:47:     at ChildProcess.exithandler (node:child_process:414:12)
2025-07-22T09:57:47:     at ChildProcess.emit (node:events:518:28)
2025-07-22T09:57:47:     at maybeClose (node:internal/child_process:1101:16)
2025-07-22T09:57:47:     at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
2025-07-22T09:57:47:   code: 127,
2025-07-22T09:57:47:   killed: false,
2025-07-22T09:57:47:   signal: null,
2025-07-22T09:57:47:   cmd: 'cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build'
2025-07-22T09:57:47: }
2025-07-22T09:57:47: Error details: Command failed: cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build
2025-07-22T09:57:47: sh: 1: vite: not found
2025-07-22T09:57:47: 
2025-07-22T10:08:07: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T10:08:21: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T10:08:21: ⚠️ Record request without church context
2025-07-22T10:08:21: ⚠️ Record request without church context
2025-07-22T10:08:33: ⚠️ Record request without church context
2025-07-22T10:08:33: ⚠️ Record request without church context
2025-07-22T10:08:58: ⚠️ Record request without church context
2025-07-22T10:08:58: ⚠️ Record request without church context
2025-07-22T10:09:01: ⚠️ Record request without church context
2025-07-22T10:09:01: ⚠️ Record request without church context
2025-07-22T10:11:49: 🚨 FRONTEND BUILD FAILED 🚨
2025-07-22T10:11:49: ❌ Build process failed: Error: Command failed: cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build
2025-07-22T10:11:49: sh: 1: vite: not found
2025-07-22T10:11:49: 
2025-07-22T10:11:49:     at genericNodeError (node:internal/errors:983:15)
2025-07-22T10:11:49:     at wrappedFn (node:internal/errors:537:14)
2025-07-22T10:11:49:     at ChildProcess.exithandler (node:child_process:414:12)
2025-07-22T10:11:49:     at ChildProcess.emit (node:events:518:28)
2025-07-22T10:11:49:     at maybeClose (node:internal/child_process:1101:16)
2025-07-22T10:11:49:     at ChildProcess._handle.onexit (node:internal/child_process:304:5) {
2025-07-22T10:11:49:   code: 127,
2025-07-22T10:11:49:   killed: false,
2025-07-22T10:11:49:   signal: null,
2025-07-22T10:11:49:   cmd: 'cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build'
2025-07-22T10:11:49: }
2025-07-22T10:11:49: Error details: Command failed: cd /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/front-end && npm install --legacy-peer-deps && NODE_OPTIONS="--max-old-space-size=4096" npm run build
2025-07-22T10:11:49: sh: 1: vite: not found
2025-07-22T10:11:49: 
2025-07-22T10:36:13: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T10:36:13:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T10:36:13:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T10:36:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T10:36:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:36:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:36:13:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T10:36:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:36:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:36:13:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T10:36:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T10:36:13:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T10:36:13:   errno: 1054,
2025-07-22T10:36:13:   sql: '\n' +
2025-07-22T10:36:13:     '            SELECT \n' +
2025-07-22T10:36:13:     '                n.id,\n' +
2025-07-22T10:36:13:     '                n.type,\n' +
2025-07-22T10:36:13:     '                n.title,\n' +
2025-07-22T10:36:13:     '                n.message,\n' +
2025-07-22T10:36:13:     '                n.data,\n' +
2025-07-22T10:36:13:     '                n.is_read,\n' +
2025-07-22T10:36:13:     '                n.priority,\n' +
2025-07-22T10:36:13:     '                n.expires_at,\n' +
2025-07-22T10:36:13:     '                n.action_url,\n' +
2025-07-22T10:36:13:     '                n.created_at,\n' +
2025-07-22T10:36:13:     '                n.read_at,\n' +
2025-07-22T10:36:13:     '                u.id as sender_id,\n' +
2025-07-22T10:36:13:     '                u.first_name as sender_first_name,\n' +
2025-07-22T10:36:13:     '                u.last_name as sender_last_name,\n' +
2025-07-22T10:36:13:     '                up.display_name as sender_display_name,\n' +
2025-07-22T10:36:13:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T10:36:13:     '            FROM notifications n\n' +
2025-07-22T10:36:13:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T10:36:13:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T10:36:13:     '            WHERE n.user_id = 4\n' +
2025-07-22T10:36:13:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T10:36:13:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T10:36:13:   sqlState: '42S22',
2025-07-22T10:36:13:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T10:36:13: }
2025-07-22T10:36:56: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T10:36:56:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T10:36:56:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T10:36:56:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T10:36:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:36:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:36:56:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T10:36:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:36:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:36:56:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T10:36:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T10:36:56:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T10:36:56:   errno: 1054,
2025-07-22T10:36:56:   sql: '\n' +
2025-07-22T10:36:56:     '            SELECT \n' +
2025-07-22T10:36:56:     '                n.id,\n' +
2025-07-22T10:36:56:     '                n.type,\n' +
2025-07-22T10:36:56:     '                n.title,\n' +
2025-07-22T10:36:56:     '                n.message,\n' +
2025-07-22T10:36:56:     '                n.data,\n' +
2025-07-22T10:36:56:     '                n.is_read,\n' +
2025-07-22T10:36:56:     '                n.priority,\n' +
2025-07-22T10:36:56:     '                n.expires_at,\n' +
2025-07-22T10:36:56:     '                n.action_url,\n' +
2025-07-22T10:36:56:     '                n.created_at,\n' +
2025-07-22T10:36:56:     '                n.read_at,\n' +
2025-07-22T10:36:56:     '                u.id as sender_id,\n' +
2025-07-22T10:36:56:     '                u.first_name as sender_first_name,\n' +
2025-07-22T10:36:56:     '                u.last_name as sender_last_name,\n' +
2025-07-22T10:36:56:     '                up.display_name as sender_display_name,\n' +
2025-07-22T10:36:56:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T10:36:56:     '            FROM notifications n\n' +
2025-07-22T10:36:56:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T10:36:56:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T10:36:56:     '            WHERE n.user_id = 4\n' +
2025-07-22T10:36:56:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T10:36:56:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T10:36:56:   sqlState: '42S22',
2025-07-22T10:36:56:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T10:36:56: }
2025-07-22T10:43:34: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T10:43:34:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T10:43:34:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T10:43:34:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T10:43:34:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:43:34:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:43:34:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T10:43:34:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T10:43:34:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T10:43:34:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T10:43:34:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T10:43:34:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T10:43:34:   errno: 1054,
2025-07-22T10:43:34:   sql: '\n' +
2025-07-22T10:43:34:     '            SELECT \n' +
2025-07-22T10:43:34:     '                n.id,\n' +
2025-07-22T10:43:34:     '                n.type,\n' +
2025-07-22T10:43:34:     '                n.title,\n' +
2025-07-22T10:43:34:     '                n.message,\n' +
2025-07-22T10:43:34:     '                n.data,\n' +
2025-07-22T10:43:34:     '                n.is_read,\n' +
2025-07-22T10:43:34:     '                n.priority,\n' +
2025-07-22T10:43:34:     '                n.expires_at,\n' +
2025-07-22T10:43:34:     '                n.action_url,\n' +
2025-07-22T10:43:34:     '                n.created_at,\n' +
2025-07-22T10:43:34:     '                n.read_at,\n' +
2025-07-22T10:43:34:     '                u.id as sender_id,\n' +
2025-07-22T10:43:34:     '                u.first_name as sender_first_name,\n' +
2025-07-22T10:43:34:     '                u.last_name as sender_last_name,\n' +
2025-07-22T10:43:34:     '                up.display_name as sender_display_name,\n' +
2025-07-22T10:43:34:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T10:43:34:     '            FROM notifications n\n' +
2025-07-22T10:43:34:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T10:43:34:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T10:43:34:     '            WHERE n.user_id = 4\n' +
2025-07-22T10:43:34:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T10:43:34:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T10:43:34:   sqlState: '42S22',
2025-07-22T10:43:34:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T10:43:34: }
2025-07-22T10:44:11: ⚠️ Record request without church context
2025-07-22T10:44:11: ⚠️ Record request without church context
2025-07-22T11:01:53: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:01:53: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T11:01:55: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:01:55: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:31:46: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:31:46: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T11:31:48: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:31:48: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:34:18: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:34:18: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T11:34:19: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:34:19: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:37:11: ⚠️ Record request without church context
2025-07-22T11:37:11: ⚠️ Record request without church context
2025-07-22T11:46:02: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:46:02: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T11:46:03: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:46:03: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T11:46:54: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T11:47:04: Error getting social permissions: Error: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ')' at line 4
2025-07-22T11:47:04:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T11:47:04:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T11:47:04:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/social-permissions.js:34:49
2025-07-22T11:47:04:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T11:47:04:   code: 'ER_PARSE_ERROR',
2025-07-22T11:47:04:   errno: 1064,
2025-07-22T11:47:04:   sql: '\n' +
2025-07-22T11:47:04:     '            SELECT rmp.menu_item_id, rmp.is_visible\n' +
2025-07-22T11:47:04:     '            FROM role_menu_permissions rmp\n' +
2025-07-22T11:47:04:     '            WHERE rmp.role = ?\n' +
2025-07-22T11:47:04:     '            AND rmp.menu_item_id IN ()\n' +
2025-07-22T11:47:04:     '        ',
2025-07-22T11:47:04:   sqlState: '42000',
2025-07-22T11:47:04:   sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ')' at line 4"
2025-07-22T11:47:04: }
2025-07-22T11:47:26: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T11:48:33: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T11:53:04: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T11:53:05: ⚠️ Record request without church context
2025-07-22T11:53:05: ⚠️ Record request without church context
2025-07-22T12:04:47: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T12:04:48: ⚠️ Record request without church context
2025-07-22T12:04:48: ⚠️ Record request without church context
2025-07-22T12:06:48: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T12:06:49: ⚠️ Record request without church context
2025-07-22T12:06:49: ⚠️ Record request without church context
2025-07-22T12:07:01: ⚠️ Record request without church context
2025-07-22T12:07:01: ⚠️ Record request without church context
2025-07-22T12:09:16: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T12:09:16: ⚠️ Record request without church context
2025-07-22T12:09:16: ⚠️ Record request without church context
2025-07-22T12:09:31: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T12:10:06: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T12:10:06:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T12:10:06:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T12:10:06:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T12:10:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T12:10:06:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T12:10:06:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T12:10:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T12:10:06:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T12:10:06:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T12:10:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T12:10:06:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T12:10:06:   errno: 1054,
2025-07-22T12:10:06:   sql: '\n' +
2025-07-22T12:10:06:     '            SELECT \n' +
2025-07-22T12:10:06:     '                n.id,\n' +
2025-07-22T12:10:06:     '                n.type,\n' +
2025-07-22T12:10:06:     '                n.title,\n' +
2025-07-22T12:10:06:     '                n.message,\n' +
2025-07-22T12:10:06:     '                n.data,\n' +
2025-07-22T12:10:06:     '                n.is_read,\n' +
2025-07-22T12:10:06:     '                n.priority,\n' +
2025-07-22T12:10:06:     '                n.expires_at,\n' +
2025-07-22T12:10:06:     '                n.action_url,\n' +
2025-07-22T12:10:06:     '                n.created_at,\n' +
2025-07-22T12:10:06:     '                n.read_at,\n' +
2025-07-22T12:10:06:     '                u.id as sender_id,\n' +
2025-07-22T12:10:06:     '                u.first_name as sender_first_name,\n' +
2025-07-22T12:10:06:     '                u.last_name as sender_last_name,\n' +
2025-07-22T12:10:06:     '                up.display_name as sender_display_name,\n' +
2025-07-22T12:10:06:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T12:10:06:     '            FROM notifications n\n' +
2025-07-22T12:10:06:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T12:10:06:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T12:10:06:     '            WHERE n.user_id = 4\n' +
2025-07-22T12:10:06:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T12:10:06:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T12:10:06:   sqlState: '42S22',
2025-07-22T12:10:06:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T12:10:06: }
2025-07-22T12:10:09: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T12:10:09:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T12:10:09:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T12:10:09:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T12:10:09:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T12:10:09:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T12:10:09:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T12:10:09:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T12:10:09:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T12:10:09:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T12:10:09:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T12:10:09:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T12:10:09:   errno: 1054,
2025-07-22T12:10:09:   sql: '\n' +
2025-07-22T12:10:09:     '            SELECT \n' +
2025-07-22T12:10:09:     '                n.id,\n' +
2025-07-22T12:10:09:     '                n.type,\n' +
2025-07-22T12:10:09:     '                n.title,\n' +
2025-07-22T12:10:09:     '                n.message,\n' +
2025-07-22T12:10:09:     '                n.data,\n' +
2025-07-22T12:10:09:     '                n.is_read,\n' +
2025-07-22T12:10:09:     '                n.priority,\n' +
2025-07-22T12:10:09:     '                n.expires_at,\n' +
2025-07-22T12:10:09:     '                n.action_url,\n' +
2025-07-22T12:10:09:     '                n.created_at,\n' +
2025-07-22T12:10:09:     '                n.read_at,\n' +
2025-07-22T12:10:09:     '                u.id as sender_id,\n' +
2025-07-22T12:10:09:     '                u.first_name as sender_first_name,\n' +
2025-07-22T12:10:09:     '                u.last_name as sender_last_name,\n' +
2025-07-22T12:10:09:     '                up.display_name as sender_display_name,\n' +
2025-07-22T12:10:09:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T12:10:09:     '            FROM notifications n\n' +
2025-07-22T12:10:09:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T12:10:09:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T12:10:09:     '            WHERE n.user_id = 4\n' +
2025-07-22T12:10:09:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T12:10:09:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T12:10:09:   sqlState: '42S22',
2025-07-22T12:10:09:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T12:10:09: }
2025-07-22T12:10:58: Error moving task: Error: Duplicate entry '33-0' for key 'unique_column_task_position'
2025-07-22T12:10:58:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T12:10:58:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T12:10:58:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/kanban/tasks.js:328:25
2025-07-22T12:10:58:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T12:10:58:   code: 'ER_DUP_ENTRY',
2025-07-22T12:10:58:   errno: 1062,
2025-07-22T12:10:58:   sql: '\n' +
2025-07-22T12:10:58:     '        UPDATE kanban_tasks \n' +
2025-07-22T12:10:58:     '        SET position = position - 1 \n' +
2025-07-22T12:10:58:     '        WHERE board_id = ? AND column_id = ? AND position > ?\n' +
2025-07-22T12:10:58:     '      ',
2025-07-22T12:10:58:   sqlState: '23000',
2025-07-22T12:10:58:   sqlMessage: "Duplicate entry '33-0' for key 'unique_column_task_position'"
2025-07-22T12:10:58: }
2025-07-22T12:12:00: Error sending friend request: Error: PROCEDURE orthodoxmetrics_db.SendFriendRequest does not exist
2025-07-22T12:12:00:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T12:12:00:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T12:12:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/friends.js:187:27
2025-07-22T12:12:00:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T12:12:00:   code: 'ER_SP_DOES_NOT_EXIST',
2025-07-22T12:12:00:   errno: 1305,
2025-07-22T12:12:00:   sql: "CALL SendFriendRequest(4, '20', '')",
2025-07-22T12:12:00:   sqlState: '42000',
2025-07-22T12:12:00:   sqlMessage: 'PROCEDURE orthodoxmetrics_db.SendFriendRequest does not exist'
2025-07-22T12:12:00: }
2025-07-22T12:54:21: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T13:12:33: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T13:12:33: ⚠️ Record request without church context
2025-07-22T13:12:33: ⚠️ Record request without church context
2025-07-22T13:13:56: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T13:13:56:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T13:13:56:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T13:13:56:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T13:13:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T13:13:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T13:13:56:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T13:13:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T13:13:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T13:13:56:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T13:13:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T13:13:56:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T13:13:56:   errno: 1054,
2025-07-22T13:13:56:   sql: '\n' +
2025-07-22T13:13:56:     '            SELECT \n' +
2025-07-22T13:13:56:     '                n.id,\n' +
2025-07-22T13:13:56:     '                n.type,\n' +
2025-07-22T13:13:56:     '                n.title,\n' +
2025-07-22T13:13:56:     '                n.message,\n' +
2025-07-22T13:13:56:     '                n.data,\n' +
2025-07-22T13:13:56:     '                n.is_read,\n' +
2025-07-22T13:13:56:     '                n.priority,\n' +
2025-07-22T13:13:56:     '                n.expires_at,\n' +
2025-07-22T13:13:56:     '                n.action_url,\n' +
2025-07-22T13:13:56:     '                n.created_at,\n' +
2025-07-22T13:13:56:     '                n.read_at,\n' +
2025-07-22T13:13:56:     '                u.id as sender_id,\n' +
2025-07-22T13:13:56:     '                u.first_name as sender_first_name,\n' +
2025-07-22T13:13:56:     '                u.last_name as sender_last_name,\n' +
2025-07-22T13:13:56:     '                up.display_name as sender_display_name,\n' +
2025-07-22T13:13:56:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T13:13:56:     '            FROM notifications n\n' +
2025-07-22T13:13:56:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T13:13:56:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T13:13:56:     '            WHERE n.user_id = 4\n' +
2025-07-22T13:13:56:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T13:13:56:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T13:13:56:   sqlState: '42S22',
2025-07-22T13:13:56:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T13:13:56: }
2025-07-22T13:14:05: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T13:14:05:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T13:14:05:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T13:14:05:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T13:14:05:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T13:14:05:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T13:14:05:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T13:14:05:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T13:14:05:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T13:14:05:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T13:14:05:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T13:14:05:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T13:14:05:   errno: 1054,
2025-07-22T13:14:05:   sql: '\n' +
2025-07-22T13:14:05:     '            SELECT \n' +
2025-07-22T13:14:05:     '                n.id,\n' +
2025-07-22T13:14:05:     '                n.type,\n' +
2025-07-22T13:14:05:     '                n.title,\n' +
2025-07-22T13:14:05:     '                n.message,\n' +
2025-07-22T13:14:05:     '                n.data,\n' +
2025-07-22T13:14:05:     '                n.is_read,\n' +
2025-07-22T13:14:05:     '                n.priority,\n' +
2025-07-22T13:14:05:     '                n.expires_at,\n' +
2025-07-22T13:14:05:     '                n.action_url,\n' +
2025-07-22T13:14:05:     '                n.created_at,\n' +
2025-07-22T13:14:05:     '                n.read_at,\n' +
2025-07-22T13:14:05:     '                u.id as sender_id,\n' +
2025-07-22T13:14:05:     '                u.first_name as sender_first_name,\n' +
2025-07-22T13:14:05:     '                u.last_name as sender_last_name,\n' +
2025-07-22T13:14:05:     '                up.display_name as sender_display_name,\n' +
2025-07-22T13:14:05:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T13:14:05:     '            FROM notifications n\n' +
2025-07-22T13:14:05:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T13:14:05:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T13:14:05:     '            WHERE n.user_id = 4\n' +
2025-07-22T13:14:05:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T13:14:05:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T13:14:05:   sqlState: '42S22',
2025-07-22T13:14:05:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T13:14:05: }
2025-07-22T13:25:29: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T13:25:30: ⚠️ Record request without church context
2025-07-22T13:25:30: ⚠️ Record request without church context
2025-07-22T13:51:15: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T13:51:15: ⚠️ Record request without church context
2025-07-22T13:51:15: ⚠️ Record request without church context
2025-07-22T15:03:14: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:14: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:14:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:14:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:14:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:14:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:14:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:14:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:14:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:14:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:14:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:14:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:14: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:15: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:15:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:15:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:15:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:15:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:15:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:15:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:15:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:15:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:15:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:15:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:15: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:15: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:15:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:15:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:15:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:15:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:15:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:15:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:15:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:15:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:15:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:15:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:15: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:16: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:16:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:16:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:16:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:16:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:16:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:16:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:16:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:16:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:16:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:16:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:16: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:16: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:16:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:16:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:16:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:16:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:16:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:16:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:16:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:16:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:16:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:16:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:16: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:17: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:17:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:17:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:17:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:17:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:17:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:17:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:17:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:17:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:17:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:17:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:17: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:17: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:17:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:17:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:17:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:17:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:17:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:17:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:17:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:17:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:17:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:17:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:17: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:17: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:17:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:17:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:17:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:17:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:17:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:17:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:17:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:17:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:17:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:17:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:18: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:18: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:18:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:18:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:18:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:18:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:18:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:18:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:18:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:18:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:18:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:18:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:18: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:18: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:18:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:18:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:18:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:18:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:18:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:18:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:18:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:18:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:18:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:18:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:19: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:19: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:19:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:19:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:19:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:19:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:19:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:19:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:19:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:19:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:19:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:19:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:19: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:19: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:19:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:19:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:19:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:19:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:19:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:19:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:19:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:19:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:19:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:19:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:20: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:20: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:20:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:20:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:20:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:20:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:20:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:20:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:20:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:20:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:20:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:20:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:20: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:20: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:20:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:20:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:20:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:20:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:20:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:20:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:20:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:20:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:20:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:20:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:21: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:21: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:21:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:21:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:21:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:21:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:21:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:21:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:21:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:21:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:21:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:21:     at require (node:internal/modules/helpers:135:16)
2025-07-22T15:03:21: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T15:03:21: ReferenceError: requireChurchOCR is not defined
2025-07-22T15:03:21:     at Object.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/ocr.js:77:64)
2025-07-22T15:03:21:     at Module._compile (node:internal/modules/cjs/loader:1730:14)
2025-07-22T15:03:21:     at Object..js (node:internal/modules/cjs/loader:1895:10)
2025-07-22T15:03:21:     at Module.load (node:internal/modules/cjs/loader:1465:32)
2025-07-22T15:03:21:     at Function._load (node:internal/modules/cjs/loader:1282:12)
2025-07-22T15:03:21:     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
2025-07-22T15:03:21:     at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
2025-07-22T15:03:21:     at Module.<anonymous> (node:internal/modules/cjs/loader:1487:12)
2025-07-22T15:03:21:     at Hook._require.Module.require (/usr/lib/node_modules/pm2/node_modules/require-in-the-middle/index.js:101:39)
2025-07-22T15:03:21:     at require (node:internal/modules/helpers:135:16)
2025-07-22T16:11:47: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:11:47: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T16:11:49: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:11:49: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:19:19: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:19:19: ⚠️ Record request without church context
2025-07-22T16:19:19: ⚠️ Record request without church context
2025-07-22T16:20:03: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:34:53: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:34:53: ⚠️ Record request without church context
2025-07-22T16:34:53: ⚠️ Record request without church context
2025-07-22T16:44:29: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:44:30: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:44:30: ⚠️ Record request without church context
2025-07-22T16:44:30: ⚠️ Record request without church context
2025-07-22T16:53:17: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:53:18: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T16:53:19: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:53:19: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T16:53:35: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:53:35: ⚠️ Record request without church context
2025-07-22T16:53:35: ⚠️ Record request without church context
2025-07-22T16:53:44: ⚠️ Record request without church context
2025-07-22T16:53:44: ⚠️ Record request without church context
2025-07-22T16:53:53: ⚠️ Record request without church context
2025-07-22T16:53:53: ⚠️ Record request without church context
2025-07-22T16:53:58: ⚠️ Record request without church context
2025-07-22T16:53:58: ⚠️ Record request without church context
2025-07-22T16:54:02: ⚠️ Record request without church context
2025-07-22T16:54:02: ⚠️ Record request without church context
2025-07-22T16:54:40: ⚠️ Record request without church context
2025-07-22T16:54:40: ⚠️ Record request without church context
2025-07-22T16:54:42: ⚠️ Record request without church context
2025-07-22T16:54:42: ⚠️ Record request without church context
2025-07-22T16:54:46: ⚠️ Record request without church context
2025-07-22T16:54:46: ⚠️ Record request without church context
2025-07-22T16:54:52: ⚠️ Record request without church context
2025-07-22T16:54:52: ⚠️ Record request without church context
2025-07-22T16:54:54: ⚠️ Record request without church context
2025-07-22T16:54:54: ⚠️ Record request without church context
2025-07-22T16:54:58: ⚠️ Record request without church context
2025-07-22T16:54:58: ⚠️ Record request without church context
2025-07-22T16:55:05: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:55:14: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T16:55:14: ⚠️ Record request without church context
2025-07-22T16:55:14: ⚠️ Record request without church context
2025-07-22T16:55:36: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:28:12: Error updating church: Error: Unknown column 'template_church_id' in 'SET'
2025-07-22T17:28:12:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:28:12:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:28:12:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:343:40
2025-07-22T17:28:12:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T17:28:12:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T17:28:12:     at multerMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/multer/lib/make-middleware.js:19:41)
2025-07-22T17:28:12:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T17:28:12:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T17:28:12:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T17:28:12:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T17:28:12:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T17:28:12:   errno: 1054,
2025-07-22T17:28:12:   sql: 'UPDATE orthodoxmetrics_db.churches SET name = ?, email = ?, phone = ?, address = ?, city = ?, state_province = ?, postal_code = ?, country = ?, preferred_language = ?, timezone = ?, currency = ?, website = ?, is_active = ?, database_name = ?, has_baptism_records = ?, has_marriage_records = ?, has_funeral_records = ?, setup_complete = ?, template_church_id = ?, default_landing_page = ?, church_id = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?',
2025-07-22T17:28:12:   sqlState: '42S22',
2025-07-22T17:28:12:   sqlMessage: "Unknown column 'template_church_id' in 'SET'"
2025-07-22T17:28:12: }
2025-07-22T17:29:32: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:29:50: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:30:06: Error updating church: Error: Unknown column 'template_church_id' in 'SET'
2025-07-22T17:30:06:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:30:06:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:30:06:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:343:40
2025-07-22T17:30:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T17:30:06:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T17:30:06:     at multerMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/multer/lib/make-middleware.js:19:41)
2025-07-22T17:30:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T17:30:06:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T17:30:06:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T17:30:06:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T17:30:06:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T17:30:06:   errno: 1054,
2025-07-22T17:30:06:   sql: 'UPDATE orthodoxmetrics_db.churches SET name = ?, email = ?, phone = ?, address = ?, city = ?, state_province = ?, postal_code = ?, country = ?, preferred_language = ?, timezone = ?, currency = ?, website = ?, is_active = ?, database_name = ?, has_baptism_records = ?, has_marriage_records = ?, has_funeral_records = ?, setup_complete = ?, template_church_id = ?, default_landing_page = ?, church_id = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?',
2025-07-22T17:30:06:   sqlState: '42S22',
2025-07-22T17:30:06:   sqlMessage: "Unknown column 'template_church_id' in 'SET'"
2025-07-22T17:30:06: }
2025-07-22T17:33:02: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:03: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T17:33:04: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:04: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:31: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:31: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T17:33:33: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:33: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:57: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:57: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T17:33:58: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:33:58: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:34:19: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:34:32: Error updating church: Error: Unknown column 'template_church_id' in 'INSERT INTO'
2025-07-22T17:34:32:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:34:32:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:34:32:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:388:25
2025-07-22T17:34:32:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T17:34:32:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T17:34:32:   errno: 1054,
2025-07-22T17:34:32:   sql: '\n' +
2025-07-22T17:34:32:     '        INSERT INTO orthodoxmetrics_db.churches \n' +
2025-07-22T17:34:32:     '        (id, name, email, phone, address, city, state_province, postal_code, country, preferred_language, timezone, currency, tax_id, website, description_multilang, settings, is_active, created_at, updated_at, has_baptism_records, has_marriage_records, has_funeral_records, setup_complete, instance_port, last_login_at, record_count_cache, notes, database_name, admin_email, language_preference, location, church_name, template_church_id, default_landing_page, updated_at) \n' +
2025-07-22T17:34:32:     '        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP)\n' +
2025-07-22T17:34:32:     '      ',
2025-07-22T17:34:32:   sqlState: '42S22',
2025-07-22T17:34:32:   sqlMessage: "Unknown column 'template_church_id' in 'INSERT INTO'"
2025-07-22T17:34:32: }
2025-07-22T17:35:35: Error updating church: Error: Unknown column 'template_church_id' in 'INSERT INTO'
2025-07-22T17:35:35:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:35:35:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:35:35:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:388:25
2025-07-22T17:35:35:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T17:35:35:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T17:35:35:   errno: 1054,
2025-07-22T17:35:35:   sql: '\n' +
2025-07-22T17:35:35:     '        INSERT INTO orthodoxmetrics_db.churches \n' +
2025-07-22T17:35:35:     '        (id, name, email, phone, address, city, state_province, postal_code, country, preferred_language, timezone, currency, tax_id, website, description_multilang, settings, is_active, created_at, updated_at, has_baptism_records, has_marriage_records, has_funeral_records, setup_complete, instance_port, last_login_at, record_count_cache, notes, database_name, admin_email, language_preference, location, church_name, template_church_id, default_landing_page, updated_at) \n' +
2025-07-22T17:35:35:     '        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP)\n' +
2025-07-22T17:35:35:     '      ',
2025-07-22T17:35:35:   sqlState: '42S22',
2025-07-22T17:35:35:   sqlMessage: "Unknown column 'template_church_id' in 'INSERT INTO'"
2025-07-22T17:35:35: }
2025-07-22T17:41:13: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:41:17: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:41:24: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:41:24: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:41:25: ⚠️ Record request without church context
2025-07-22T17:41:25: ⚠️ Record request without church context
2025-07-22T17:41:34: ⚠️ Record request without church context
2025-07-22T17:41:34: ⚠️ Record request without church context
2025-07-22T17:41:37: ⚠️ Record request without church context
2025-07-22T17:41:37: ⚠️ Record request without church context
2025-07-22T17:41:54: Church 14 (Saints Peter and Paul Orthodox Church) has no database_name configured
2025-07-22T17:50:36: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:50:36: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T17:50:38: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:50:38: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:51:18: ❌ Error getting database info: Error: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, 
2025-07-22T17:51:18:                 ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3
2025-07-22T17:51:18:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:51:18:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:51:18:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:753:44
2025-07-22T17:51:18:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T17:51:18:   code: 'ER_PARSE_ERROR',
2025-07-22T17:51:18:   errno: 1064,
2025-07-22T17:51:18:   sql: '\n' +
2025-07-22T17:51:18:     '            SELECT \n' +
2025-07-22T17:51:18:     '                TABLE_NAME as name, \n' +
2025-07-22T17:51:18:     '                TABLE_ROWS as rows, \n' +
2025-07-22T17:51:18:     '                ROUND((data_length + index_length) / 1024 / 1024, 2) AS size_mb,\n' +
2025-07-22T17:51:18:     '                CREATE_TIME as created_at,\n' +
2025-07-22T17:51:18:     '                UPDATE_TIME as updated_at\n' +
2025-07-22T17:51:18:     '            FROM information_schema.TABLES \n' +
2025-07-22T17:51:18:     '            WHERE TABLE_SCHEMA = ?\n' +
2025-07-22T17:51:18:     '            ORDER BY size_mb DESC, TABLE_NAME\n' +
2025-07-22T17:51:18:     '        ',
2025-07-22T17:51:18:   sqlState: '42000',
2025-07-22T17:51:18:   sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, \n" +
2025-07-22T17:51:18:     "                ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3"
2025-07-22T17:51:18: }
2025-07-22T17:52:45: ❌ Error getting database info: Error: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, 
2025-07-22T17:52:45:                 ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3
2025-07-22T17:52:45:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:52:45:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:52:45:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:753:44
2025-07-22T17:52:45:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T17:52:45:   code: 'ER_PARSE_ERROR',
2025-07-22T17:52:45:   errno: 1064,
2025-07-22T17:52:45:   sql: '\n' +
2025-07-22T17:52:45:     '            SELECT \n' +
2025-07-22T17:52:45:     '                TABLE_NAME as name, \n' +
2025-07-22T17:52:45:     '                TABLE_ROWS as rows, \n' +
2025-07-22T17:52:45:     '                ROUND((data_length + index_length) / 1024 / 1024, 2) AS size_mb,\n' +
2025-07-22T17:52:45:     '                CREATE_TIME as created_at,\n' +
2025-07-22T17:52:45:     '                UPDATE_TIME as updated_at\n' +
2025-07-22T17:52:45:     '            FROM information_schema.TABLES \n' +
2025-07-22T17:52:45:     '            WHERE TABLE_SCHEMA = ?\n' +
2025-07-22T17:52:45:     '            ORDER BY size_mb DESC, TABLE_NAME\n' +
2025-07-22T17:52:45:     '        ',
2025-07-22T17:52:45:   sqlState: '42000',
2025-07-22T17:52:45:   sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, \n" +
2025-07-22T17:52:45:     "                ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3"
2025-07-22T17:52:45: }
2025-07-22T17:57:00: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:57:00: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T17:57:02: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:57:02: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T17:58:01: ❌ Error getting database info: Error: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, 
2025-07-22T17:58:01:                 ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3
2025-07-22T17:58:01:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T17:58:01:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T17:58:01:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/admin/churches.js:798:44
2025-07-22T17:58:01:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T17:58:01:   code: 'ER_PARSE_ERROR',
2025-07-22T17:58:01:   errno: 1064,
2025-07-22T17:58:01:   sql: '\n' +
2025-07-22T17:58:01:     '            SELECT \n' +
2025-07-22T17:58:01:     '                TABLE_NAME as name, \n' +
2025-07-22T17:58:01:     '                TABLE_ROWS as rows, \n' +
2025-07-22T17:58:01:     '                ROUND((data_length + index_length) / 1024 / 1024, 2) AS size_mb,\n' +
2025-07-22T17:58:01:     '                CREATE_TIME as created_at,\n' +
2025-07-22T17:58:01:     '                UPDATE_TIME as updated_at\n' +
2025-07-22T17:58:01:     '            FROM information_schema.TABLES \n' +
2025-07-22T17:58:01:     '            WHERE TABLE_SCHEMA = ?\n' +
2025-07-22T17:58:01:     '            ORDER BY size_mb DESC, TABLE_NAME\n' +
2025-07-22T17:58:01:     '        ',
2025-07-22T17:58:01:   sqlState: '42000',
2025-07-22T17:58:01:   sqlMessage: "You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'rows, \n" +
2025-07-22T17:58:01:     "                ROUND((data_length + index_length) / 1024 / 1024, 2) A...' at line 3"
2025-07-22T17:58:01: }
2025-07-22T18:00:30: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:00:31: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:00:32: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:00:32: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:04:08: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:04:08: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:04:10: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:04:10: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:19:27: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:19:27: ⚠️ Record request without church context
2025-07-22T18:19:27: ⚠️ Record request without church context
2025-07-22T18:20:23: ⚠️ Record request without church context
2025-07-22T18:20:23: ⚠️ Record request without church context
2025-07-22T18:20:57: ⚠️ Record request without church context
2025-07-22T18:20:57: ⚠️ Record request without church context
2025-07-22T18:22:42: ⚠️ Record request without church context
2025-07-22T18:22:42: ⚠️ Record request without church context
2025-07-22T18:22:52: ⚠️ Record request without church context
2025-07-22T18:22:52: ⚠️ Record request without church context
2025-07-22T18:23:09: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:23:09: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:23:10: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:23:10: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:23:13: ⚠️ Record request without church context
2025-07-22T18:23:13: ⚠️ Record request without church context
2025-07-22T18:23:27: ⚠️ Record request without church context
2025-07-22T18:23:27: ⚠️ Record request without church context
2025-07-22T18:23:30: ⚠️ Record request without church context
2025-07-22T18:23:30: ⚠️ Record request without church context
2025-07-22T18:23:34: ⚠️ Record request without church context
2025-07-22T18:23:34: ⚠️ Record request without church context
2025-07-22T18:24:30: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:31:44: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:31:44: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:31:45: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:31:45: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:31:55: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:31:55: ⚠️ Record request without church context
2025-07-22T18:31:55: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:31:55:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:31:55:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:31:55:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:31:55:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:31:55:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:31:55:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:31:55:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:31:55:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:31:55:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:31:55:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:31:55: ⚠️ Record request without church context
2025-07-22T18:31:55: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:31:55:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:31:55:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:31:55:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:32:13: ⚠️ Record request without church context
2025-07-22T18:32:13: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:32:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:32:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:32:13:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:32:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:32:13:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:32:13:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:32:13:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:32:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:32:13: ⚠️ Record request without church context
2025-07-22T18:32:13: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:32:13:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:32:13:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:32:13:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:32:15: ⚠️ Record request without church context
2025-07-22T18:32:15: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:32:15:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:32:15:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:15:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:32:15:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:32:15:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:15:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:32:15:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:32:15:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:32:15:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:32:15:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:32:15: ⚠️ Record request without church context
2025-07-22T18:32:15: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:32:15:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:32:15:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:32:15:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:32:19: ⚠️ Record request without church context
2025-07-22T18:32:19: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:32:19:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/marriage.js:429:58
2025-07-22T18:32:19:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:19:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:32:19:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:32:19:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:19:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:32:19:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:32:19:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:32:19:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:32:19:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:32:19: ⚠️ Record request without church context
2025-07-22T18:32:19: fetch marriage-records error: Error: No active church found with ID: 1
2025-07-22T18:32:19:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/marriage.js:25:15)
2025-07-22T18:32:19:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:32:19:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/marriage.js:59:30
2025-07-22T18:32:22: ⚠️ Record request without church context
2025-07-22T18:32:22: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:32:22:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:395:58
2025-07-22T18:32:22:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:22:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:32:22:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:32:22:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:32:22:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:32:22:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:32:22:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:32:22:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:32:22:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:32:22: ⚠️ Record request without church context
2025-07-22T18:32:22: fetch funeral-records error: Error: No active church found with ID: 1
2025-07-22T18:32:22:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:25:15)
2025-07-22T18:32:22:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:32:22:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:59:30
2025-07-22T18:40:15: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:40:16: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:40:17: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:40:17: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:40:23: ⚠️ Record request without church context
2025-07-22T18:40:23: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:40:23:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:40:23:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:23:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:40:23:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:40:23:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:23:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:40:23:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:40:23:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:40:23:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:40:23:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:40:23: ⚠️ Record request without church context
2025-07-22T18:40:23: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:40:23:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:40:23:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:40:23:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:40:30: ⚠️ Record request without church context
2025-07-22T18:40:30: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:40:30:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:40:30:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:30:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:40:30:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:40:30:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:30:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:40:30:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:40:30:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:40:30:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:40:30:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:40:30: ⚠️ Record request without church context
2025-07-22T18:40:30: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:40:30:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:40:30:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:40:30:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:40:36: ⚠️ Record request without church context
2025-07-22T18:40:36: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:40:36:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:40:36:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:36:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:40:36:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:40:36:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:36:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:40:36:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:40:36:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:40:36:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:40:36:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:40:36: ⚠️ Record request without church context
2025-07-22T18:40:36: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:40:36:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:40:36:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:40:36:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:40:38: ⚠️ Record request without church context
2025-07-22T18:40:38: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:40:38:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:40:38:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:38:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:40:38:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:40:38:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:38:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:40:38:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:40:38:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:40:38:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:40:38:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:40:38: ⚠️ Record request without church context
2025-07-22T18:40:38: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:40:38:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:40:38:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:40:38:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:40:41: ⚠️ Record request without church context
2025-07-22T18:40:41: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:40:41:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:394:58
2025-07-22T18:40:41:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:41:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:40:41:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:40:41:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:40:41:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:40:41:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:40:41:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:40:41:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:40:41:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:40:41: ⚠️ Record request without church context
2025-07-22T18:40:41: fetch funeral-records error: Error: No active church found with ID: 1
2025-07-22T18:40:41:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:25:15)
2025-07-22T18:40:41:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:40:41:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/funeral.js:59:30
2025-07-22T18:41:50: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:41:50: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:41:50: ⚠️ Record request without church context
2025-07-22T18:41:50: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:41:50:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:41:50:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:50:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:41:50:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:41:50:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:50:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:41:50:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:41:50:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:41:50:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:41:50:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:41:50: ⚠️ Record request without church context
2025-07-22T18:41:50: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:41:50:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:41:50:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:41:50:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:41:56: ⚠️ Record request without church context
2025-07-22T18:41:56: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:41:56:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:41:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:41:56:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:41:56:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:56:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:41:56:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:41:56:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:41:56:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:41:56:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:41:56: ⚠️ Record request without church context
2025-07-22T18:41:56: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:41:56:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:41:56:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:41:56:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:41:58: ⚠️ Record request without church context
2025-07-22T18:41:58: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:41:58:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:41:58:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:58:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:41:58:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:41:58:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:41:58:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:41:58:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:41:58:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:41:58:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:41:58:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:41:58: ⚠️ Record request without church context
2025-07-22T18:41:58: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:41:58:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:41:58:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:41:58:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:42:01: ⚠️ Record request without church context
2025-07-22T18:42:01: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:42:01:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:42:01:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:42:01:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:42:01:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:42:01:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:42:01:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:42:01:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:42:01:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:42:01:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:42:01:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:42:01: ⚠️ Record request without church context
2025-07-22T18:42:01: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:42:01:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:42:01:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:42:01:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:42:09: ⚠️ Record request without church context
2025-07-22T18:42:09: fetch dropdown-options error: ReferenceError: CHURCH_DB_NAME is not defined
2025-07-22T18:42:09:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:436:58
2025-07-22T18:42:09:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:42:09:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:42:09:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:42:09:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:42:09:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:284:15
2025-07-22T18:42:09:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:365:14)
2025-07-22T18:42:09:     at param (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:376:14)
2025-07-22T18:42:09:     at Function.process_params (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:421:3)
2025-07-22T18:42:09:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/index.js:280:10)
2025-07-22T18:42:09: ⚠️ Record request without church context
2025-07-22T18:42:09: fetch baptism-records error: Error: No active church found with ID: 1
2025-07-22T18:42:09:     at getChurchDatabaseName (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:25:15)
2025-07-22T18:42:09:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2025-07-22T18:42:09:     at async /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/baptism.js:61:30
2025-07-22T18:46:38: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:46:39: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:46:40: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:46:40: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:47:49: ⚠️ Record request without church context
2025-07-22T18:47:49: ⚠️ Record request without church context
2025-07-22T18:47:49: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:47:56: ⚠️ Record request without church context
2025-07-22T18:47:56: ⚠️ Record request without church context
2025-07-22T18:47:56: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:47:57: ⚠️ Record request without church context
2025-07-22T18:47:57: ⚠️ Record request without church context
2025-07-22T18:47:57: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:47:59: ⚠️ Record request without church context
2025-07-22T18:47:59: ⚠️ Record request without church context
2025-07-22T18:47:59: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:48:04: ⚠️ Record request without church context
2025-07-22T18:48:04: ⚠️ Record request without church context
2025-07-22T18:48:04: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:48:07: ⚠️ Record request without church context
2025-07-22T18:48:07: ⚠️ Record request without church context
2025-07-22T18:48:07: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:49:20: ⚠️ Record request without church context
2025-07-22T18:49:20: ⚠️ No active church found with ID: 1, using default database
2025-07-22T18:52:47: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:52:48: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T18:52:49: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:52:49: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T18:53:53: ⚠️ Record request without church context
2025-07-22T18:53:53: ⚠️ Record request without church context
2025-07-22T18:54:07: ⚠️ Record request without church context
2025-07-22T18:54:07: ⚠️ Record request without church context
2025-07-22T18:54:16: ⚠️ Record request without church context
2025-07-22T18:54:16: ⚠️ Record request without church context
2025-07-22T18:55:43: Error fetching notifications: Error: Unknown column 'n.type' in 'SELECT'
2025-07-22T18:55:43:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T18:55:43:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T18:55:43:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:78:51
2025-07-22T18:55:43:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:55:43:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:55:43:     at requireAuth (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/notifications.js:13:5)
2025-07-22T18:55:43:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T18:55:43:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T18:55:43:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T18:55:43:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T18:55:43:   code: 'ER_BAD_FIELD_ERROR',
2025-07-22T18:55:43:   errno: 1054,
2025-07-22T18:55:43:   sql: '\n' +
2025-07-22T18:55:43:     '            SELECT \n' +
2025-07-22T18:55:43:     '                n.id,\n' +
2025-07-22T18:55:43:     '                n.type,\n' +
2025-07-22T18:55:43:     '                n.title,\n' +
2025-07-22T18:55:43:     '                n.message,\n' +
2025-07-22T18:55:43:     '                n.data,\n' +
2025-07-22T18:55:43:     '                n.is_read,\n' +
2025-07-22T18:55:43:     '                n.priority,\n' +
2025-07-22T18:55:43:     '                n.expires_at,\n' +
2025-07-22T18:55:43:     '                n.action_url,\n' +
2025-07-22T18:55:43:     '                n.created_at,\n' +
2025-07-22T18:55:43:     '                n.read_at,\n' +
2025-07-22T18:55:43:     '                u.id as sender_id,\n' +
2025-07-22T18:55:43:     '                u.first_name as sender_first_name,\n' +
2025-07-22T18:55:43:     '                u.last_name as sender_last_name,\n' +
2025-07-22T18:55:43:     '                up.display_name as sender_display_name,\n' +
2025-07-22T18:55:43:     '                up.profile_image_url as sender_avatar\n' +
2025-07-22T18:55:43:     '            FROM notifications n\n' +
2025-07-22T18:55:43:     '            LEFT JOIN users u ON n.sender_id = u.id\n' +
2025-07-22T18:55:43:     '            LEFT JOIN user_profiles up ON up.user_id = u.id\n' +
2025-07-22T18:55:43:     '            WHERE n.user_id = 4\n' +
2025-07-22T18:55:43:     '            AND (n.expires_at IS NULL OR n.expires_at > NOW())\n' +
2025-07-22T18:55:43:     '         ORDER BY n.priority DESC, n.created_at DESC LIMIT 50 OFFSET 0',
2025-07-22T18:55:43:   sqlState: '42S22',
2025-07-22T18:55:43:   sqlMessage: "Unknown column 'n.type' in 'SELECT'"
2025-07-22T18:55:43: }
2025-07-22T18:57:19: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T18:57:19: ⚠️ Record request without church context
2025-07-22T18:57:19: ⚠️ Record request without church context
2025-07-22T19:02:31: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:02:31: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T19:02:32: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:02:32: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:08:12: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T19:08:12: ⚠️ Record request without church context
2025-07-22T19:08:12: ⚠️ Record request without church context
2025-07-22T19:13:09: ⚠️ Record request without church context
2025-07-22T19:13:09: ⚠️ Record request without church context
2025-07-22T19:13:34: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:13:34: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T19:13:35: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:13:35: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:14:37: ⚠️ Record request without church context
2025-07-22T19:14:37: ⚠️ Record request without church context
2025-07-22T19:28:56: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:28:57: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T19:28:59: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:28:59: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T19:31:46: Error sending friend request: Error: PROCEDURE orthodoxmetrics_db.SendFriendRequest does not exist
2025-07-22T19:31:46:     at PromisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:36:22)
2025-07-22T19:31:46:     at promisePool.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:41:10)
2025-07-22T19:31:46:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/social/friends.js:187:27
2025-07-22T19:31:46:     at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
2025-07-22T19:31:46:   code: 'ER_SP_DOES_NOT_EXIST',
2025-07-22T19:31:46:   errno: 1305,
2025-07-22T19:31:46:   sql: "CALL SendFriendRequest(4, '20', '')",
2025-07-22T19:31:46:   sqlState: '42000',
2025-07-22T19:31:46:   sqlMessage: 'PROCEDURE orthodoxmetrics_db.SendFriendRequest does not exist'
2025-07-22T19:31:46: }
2025-07-22T20:30:27: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:30:27: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T20:30:29: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:30:29: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:37:42: ❌ Error fetching headlines sources: Error: Table 'orthodoxmetrics_db.headlines_sources' doesn't exist
2025-07-22T20:37:42:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:37:42:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:37:42:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:18:45
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:37:42:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:37:42:   errno: 1146,
2025-07-22T20:37:42:   sql: '\n' +
2025-07-22T20:37:42:     '            SELECT \n' +
2025-07-22T20:37:42:     '                id,\n' +
2025-07-22T20:37:42:     '                name,\n' +
2025-07-22T20:37:42:     '                feed_url,\n' +
2025-07-22T20:37:42:     '                language,\n' +
2025-07-22T20:37:42:     '                enabled,\n' +
2025-07-22T20:37:42:     '                categories,\n' +
2025-07-22T20:37:42:     '                description,\n' +
2025-07-22T20:37:42:     '                last_fetch,\n' +
2025-07-22T20:37:42:     '                article_count,\n' +
2025-07-22T20:37:42:     '                status,\n' +
2025-07-22T20:37:42:     '                created_at,\n' +
2025-07-22T20:37:42:     '                updated_at\n' +
2025-07-22T20:37:42:     '            FROM headlines_sources \n' +
2025-07-22T20:37:42:     '            ORDER BY name ASC\n' +
2025-07-22T20:37:42:     '        ',
2025-07-22T20:37:42:   sqlState: '42S02',
2025-07-22T20:37:42:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_sources' doesn't exist"
2025-07-22T20:37:42: }
2025-07-22T20:37:42: ❌ Error fetching headlines categories: Error: Table 'orthodoxmetrics_db.headlines_categories' doesn't exist
2025-07-22T20:37:42:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:37:42:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:37:42:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:65:48
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:37:42:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:37:42:   errno: 1146,
2025-07-22T20:37:42:   sql: '\n' +
2025-07-22T20:37:42:     '            SELECT \n' +
2025-07-22T20:37:42:     '                id,\n' +
2025-07-22T20:37:42:     '                name,\n' +
2025-07-22T20:37:42:     '                enabled,\n' +
2025-07-22T20:37:42:     '                keywords,\n' +
2025-07-22T20:37:42:     '                priority,\n' +
2025-07-22T20:37:42:     '                description,\n' +
2025-07-22T20:37:42:     '                created_at,\n' +
2025-07-22T20:37:42:     '                updated_at\n' +
2025-07-22T20:37:42:     '            FROM headlines_categories \n' +
2025-07-22T20:37:42:     '            ORDER BY priority DESC, name ASC\n' +
2025-07-22T20:37:42:     '        ',
2025-07-22T20:37:42:   sqlState: '42S02',
2025-07-22T20:37:42:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_categories' doesn't exist"
2025-07-22T20:37:42: }
2025-07-22T20:37:42: ❌ Error fetching headlines configuration: Error: Table 'orthodoxmetrics_db.headlines_config' doesn't exist
2025-07-22T20:37:42:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:37:42:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:37:42:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:108:45
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:37:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:37:42:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:37:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:37:42:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:37:42:   errno: 1146,
2025-07-22T20:37:42:   sql: '\n' +
2025-07-22T20:37:42:     '            SELECT * FROM headlines_config \n' +
2025-07-22T20:37:42:     '            WHERE user_id = ? OR user_id IS NULL \n' +
2025-07-22T20:37:42:     '            ORDER BY user_id DESC \n' +
2025-07-22T20:37:42:     '            LIMIT 1\n' +
2025-07-22T20:37:42:     '        ',
2025-07-22T20:37:42:   sqlState: '42S02',
2025-07-22T20:37:42:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_config' doesn't exist"
2025-07-22T20:37:42: }
2025-07-22T20:39:42: ❌ Error adding headlines source: Error: Table 'orthodoxmetrics_db.headlines_sources' doesn't exist
2025-07-22T20:39:42:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:39:42:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:39:42:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:246:27
2025-07-22T20:39:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:39:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:39:42:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:39:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:39:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:39:42:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:39:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:39:42:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:39:42:   errno: 1146,
2025-07-22T20:39:42:   sql: '\n' +
2025-07-22T20:39:42:     '            INSERT INTO headlines_sources \n' +
2025-07-22T20:39:42:     '            (id, name, feed_url, language, enabled, categories, description, status)\n' +
2025-07-22T20:39:42:     "            VALUES (?, ?, ?, ?, ?, ?, ?, 'inactive')\n" +
2025-07-22T20:39:42:     '        ',
2025-07-22T20:39:42:   sqlState: '42S02',
2025-07-22T20:39:42:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_sources' doesn't exist"
2025-07-22T20:39:42: }
2025-07-22T20:44:56: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:44:56: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T20:44:57: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:44:57: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T20:46:04: ❌ Error adding headlines source: Error: Table 'orthodoxmetrics_db.headlines_sources' doesn't exist
2025-07-22T20:46:04:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:46:04:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:46:04:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:246:27
2025-07-22T20:46:04:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:04:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:04:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:46:04:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:04:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:04:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:46:04:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:46:04:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:46:04:   errno: 1146,
2025-07-22T20:46:04:   sql: '\n' +
2025-07-22T20:46:04:     '            INSERT INTO headlines_sources \n' +
2025-07-22T20:46:04:     '            (id, name, feed_url, language, enabled, categories, description, status)\n' +
2025-07-22T20:46:04:     "            VALUES (?, ?, ?, ?, ?, ?, ?, 'inactive')\n" +
2025-07-22T20:46:04:     '        ',
2025-07-22T20:46:04:   sqlState: '42S02',
2025-07-22T20:46:04:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_sources' doesn't exist"
2025-07-22T20:46:04: }
2025-07-22T20:46:13: ❌ Error fetching headlines sources: Error: Table 'orthodoxmetrics_db.headlines_sources' doesn't exist
2025-07-22T20:46:13:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:46:13:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:46:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:18:45
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:46:13:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:46:13:   errno: 1146,
2025-07-22T20:46:13:   sql: '\n' +
2025-07-22T20:46:13:     '            SELECT \n' +
2025-07-22T20:46:13:     '                id,\n' +
2025-07-22T20:46:13:     '                name,\n' +
2025-07-22T20:46:13:     '                feed_url,\n' +
2025-07-22T20:46:13:     '                language,\n' +
2025-07-22T20:46:13:     '                enabled,\n' +
2025-07-22T20:46:13:     '                categories,\n' +
2025-07-22T20:46:13:     '                description,\n' +
2025-07-22T20:46:13:     '                last_fetch,\n' +
2025-07-22T20:46:13:     '                article_count,\n' +
2025-07-22T20:46:13:     '                status,\n' +
2025-07-22T20:46:13:     '                created_at,\n' +
2025-07-22T20:46:13:     '                updated_at\n' +
2025-07-22T20:46:13:     '            FROM headlines_sources \n' +
2025-07-22T20:46:13:     '            ORDER BY name ASC\n' +
2025-07-22T20:46:13:     '        ',
2025-07-22T20:46:13:   sqlState: '42S02',
2025-07-22T20:46:13:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_sources' doesn't exist"
2025-07-22T20:46:13: }
2025-07-22T20:46:13: ❌ Error fetching headlines categories: Error: Table 'orthodoxmetrics_db.headlines_categories' doesn't exist
2025-07-22T20:46:13:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:46:13:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:46:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:65:48
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:46:13:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:46:13:   errno: 1146,
2025-07-22T20:46:13:   sql: '\n' +
2025-07-22T20:46:13:     '            SELECT \n' +
2025-07-22T20:46:13:     '                id,\n' +
2025-07-22T20:46:13:     '                name,\n' +
2025-07-22T20:46:13:     '                enabled,\n' +
2025-07-22T20:46:13:     '                keywords,\n' +
2025-07-22T20:46:13:     '                priority,\n' +
2025-07-22T20:46:13:     '                description,\n' +
2025-07-22T20:46:13:     '                created_at,\n' +
2025-07-22T20:46:13:     '                updated_at\n' +
2025-07-22T20:46:13:     '            FROM headlines_categories \n' +
2025-07-22T20:46:13:     '            ORDER BY priority DESC, name ASC\n' +
2025-07-22T20:46:13:     '        ',
2025-07-22T20:46:13:   sqlState: '42S02',
2025-07-22T20:46:13:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_categories' doesn't exist"
2025-07-22T20:46:13: }
2025-07-22T20:46:13: ❌ Error fetching headlines configuration: Error: Table 'orthodoxmetrics_db.headlines_config' doesn't exist
2025-07-22T20:46:13:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:46:13:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:46:13:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:108:45
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:13:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:13:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:46:13:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:46:13:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:46:13:   errno: 1146,
2025-07-22T20:46:13:   sql: '\n' +
2025-07-22T20:46:13:     '            SELECT * FROM headlines_config \n' +
2025-07-22T20:46:13:     '            WHERE user_id = ? OR user_id IS NULL \n' +
2025-07-22T20:46:13:     '            ORDER BY user_id DESC \n' +
2025-07-22T20:46:13:     '            LIMIT 1\n' +
2025-07-22T20:46:13:     '        ',
2025-07-22T20:46:13:   sqlState: '42S02',
2025-07-22T20:46:13:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_config' doesn't exist"
2025-07-22T20:46:13: }
2025-07-22T20:46:42: ❌ Error adding headlines source: Error: Table 'orthodoxmetrics_db.headlines_sources' doesn't exist
2025-07-22T20:46:42:     at PromisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysql2/lib/promise/pool.js:54:22)
2025-07-22T20:46:42:     at promisePool.execute (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/config/db.js:47:10)
2025-07-22T20:46:42:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/routes/headlines-config.js:246:27
2025-07-22T20:46:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:42:     at authMiddleware (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/middleware/auth.js:71:3)
2025-07-22T20:46:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5)
2025-07-22T20:46:42:     at next (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:149:13)
2025-07-22T20:46:42:     at Route.dispatch (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/route.js:119:3)
2025-07-22T20:46:42:     at Layer.handle [as handle_request] (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/express/lib/router/layer.js:95:5) {
2025-07-22T20:46:42:   code: 'ER_NO_SUCH_TABLE',
2025-07-22T20:46:42:   errno: 1146,
2025-07-22T20:46:42:   sql: '\n' +
2025-07-22T20:46:42:     '            INSERT INTO headlines_sources \n' +
2025-07-22T20:46:42:     '            (id, name, feed_url, language, enabled, categories, description, status)\n' +
2025-07-22T20:46:42:     "            VALUES (?, ?, ?, ?, ?, ?, ?, 'inactive')\n" +
2025-07-22T20:46:42:     '        ',
2025-07-22T20:46:42:   sqlState: '42S02',
2025-07-22T20:46:42:   sqlMessage: "Table 'orthodoxmetrics_db.headlines_sources' doesn't exist"
2025-07-22T20:46:42: }
2025-07-22T22:05:37: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T22:05:37: ⚠️  STRIPE_SECRET_KEY not found in environment variables. Stripe functionality will be disabled.
2025-07-22T22:05:39: Ignoring invalid configuration option passed to Connection: acquireTimeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T22:05:39: Ignoring invalid configuration option passed to Connection: timeout. This is currently a warning, but in future versions of MySQL2, an error will be thrown if you pass an invalid configuration option to a Connection
2025-07-22T22:20:24: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T22:20:24: ⚠️ Record request without church context
2025-07-22T22:20:24: ⚠️ Record request without church context
2025-07-22T22:22:08: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T22:22:08: ⚠️ Record request without church context
2025-07-22T22:22:08: ⚠️ Record request without church context
2025-07-22T22:22:39: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T22:22:39: ⚠️ Record request without church context
2025-07-22T22:22:39: ⚠️ Record request without church context
2025-07-22T23:44:27: ⚠️ Record request without church context
2025-07-22T23:44:27: ⚠️ Record request without church context
2025-07-22T23:47:06: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-22T23:47:06: ⚠️ Record request without church context
2025-07-22T23:47:06: ⚠️ Record request without church context
2025-07-23T02:00:00: ❌ Failed to backup database cgpt: Error: SELECT command denied to user 'orthodoxapp'@'localhost' for table `cgpt`.`conversation_topics`
2025-07-23T02:00:00:     at PromiseConnection.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/node_modules/mysql2/promise.js:93:22)
2025-07-23T02:00:00:     at DB.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:747:46)
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:44:71
2025-07-23T02:00:00:     at new Promise (<anonymous>)
2025-07-23T02:00:00:     at __awaiter (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:40:12)
2025-07-23T02:00:00:     at DB.multiQuery (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:742:16)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:80:42
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at fulfilled (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:41:58) {
2025-07-23T02:00:00:   code: 'ER_TABLEACCESS_DENIED_ERROR',
2025-07-23T02:00:00:   errno: 1142,
2025-07-23T02:00:00:   sql: 'SHOW COLUMNS FROM `conversation_topics` FROM `cgpt`;\n' +
2025-07-23T02:00:00:     'SHOW COLUMNS FROM `conversations` FROM `cgpt`;',
2025-07-23T02:00:00:   sqlState: '42000',
2025-07-23T02:00:00:   sqlMessage: "SELECT command denied to user 'orthodoxapp'@'localhost' for table `cgpt`.`conversation_topics`"
2025-07-23T02:00:00: }
2025-07-23T02:00:00: ❌ Failed to backup database cgpt_logs: Error: SELECT command denied to user 'orthodoxapp'@'localhost' for table `cgpt_logs`.`conversation_topics`
2025-07-23T02:00:00:     at PromiseConnection.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/node_modules/mysql2/promise.js:93:22)
2025-07-23T02:00:00:     at DB.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:747:46)
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:44:71
2025-07-23T02:00:00:     at new Promise (<anonymous>)
2025-07-23T02:00:00:     at __awaiter (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:40:12)
2025-07-23T02:00:00:     at DB.multiQuery (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:742:16)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:80:42
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at fulfilled (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:41:58) {
2025-07-23T02:00:00:   code: 'ER_TABLEACCESS_DENIED_ERROR',
2025-07-23T02:00:00:   errno: 1142,
2025-07-23T02:00:00:   sql: 'SHOW COLUMNS FROM `conversation_topics` FROM `cgpt_logs`;\n' +
2025-07-23T02:00:00:     'SHOW COLUMNS FROM `conversations` FROM `cgpt_logs`;',
2025-07-23T02:00:00:   sqlState: '42000',
2025-07-23T02:00:00:   sqlMessage: "SELECT command denied to user 'orthodoxapp'@'localhost' for table `cgpt_logs`.`conversation_topics`"
2025-07-23T02:00:00: }
2025-07-23T02:00:00: ❌ Failed to backup database orthodoxmetrics_ocr_db: Error: SELECT command denied to user 'orthodoxapp'@'localhost' for table `orthodoxmetrics_ocr_db`.`ocr_jobs`
2025-07-23T02:00:00:     at PromiseConnection.query (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/node_modules/mysql2/promise.js:93:22)
2025-07-23T02:00:00:     at DB.<anonymous> (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:747:46)
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:44:71
2025-07-23T02:00:00:     at new Promise (<anonymous>)
2025-07-23T02:00:00:     at __awaiter (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:40:12)
2025-07-23T02:00:00:     at DB.multiQuery (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:742:16)
2025-07-23T02:00:00:     at /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:80:42
2025-07-23T02:00:00:     at Generator.next (<anonymous>)
2025-07-23T02:00:00:     at fulfilled (/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/node_modules/mysqldump/dist/cjs.js:41:58) {
2025-07-23T02:00:00:   code: 'ER_TABLEACCESS_DENIED_ERROR',
2025-07-23T02:00:00:   errno: 1142,
2025-07-23T02:00:00:   sql: 'SHOW COLUMNS FROM `ocr_jobs` FROM `orthodoxmetrics_ocr_db`;\n' +
2025-07-23T02:00:00:     'SHOW COLUMNS FROM `ocr_queue` FROM `orthodoxmetrics_ocr_db`;\n' +
2025-07-23T02:00:00:     'SHOW COLUMNS FROM `ocr_settings` FROM `orthodoxmetrics_ocr_db`;',
2025-07-23T02:00:00:   sqlState: '42000',
2025-07-23T02:00:00:   sqlMessage: "SELECT command denied to user 'orthodoxapp'@'localhost' for table `orthodoxmetrics_ocr_db`.`ocr_jobs`"
2025-07-23T02:00:00: }
2025-07-23T02:03:24: (node:679041) [DEP0147] DeprecationWarning: In future versions of Node.js, fs.rmdir(path, { recursive: true }) will be removed. Use fs.rm(path, { recursive: true }) instead
2025-07-23T02:03:24: (Use `node --trace-deprecation ...` to show where the warning was created)
2025-07-23T07:03:42: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-23T07:03:42: Error getting stats for church 14 (Saints Peter and Paul Orthodox Church): Table 'ssppoc_records_db.users' doesn't exist
2025-07-23T07:03:42: ⚠️ Record request without church context
2025-07-23T07:03:42: ⚠️ Record request without church context
