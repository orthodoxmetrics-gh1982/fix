
📋 Processing 39 tables that need church_id...


🔧 Processing table: activity_feed
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed activity_feed

🔧 Processing table: admin_settings
   - Backfill via: created_by
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed admin_settings

🔧 Processing table: audit_logs
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed audit_logs

🔧 Processing table: bigbook_notes
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed bigbook_notes

🔧 Processing table: blog_categories
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed blog_categories

🔧 Processing table: blog_comments
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed blog_comments

🔧 Processing table: blog_posts
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed blog_posts

🔧 Processing table: calendar_settings
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed calendar_settings

🔧 Processing table: chat_conversations
   - Backfill via: created_by
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed chat_conversations

🔧 Processing table: chat_participants
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed chat_participants

🔧 Processing table: component_usage
   - Backfill via: user_id
   - Row count: 908
   ℹ️  church_id column already exists
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  component_usage: Only 0/908 rows have church_id
   ✅ Successfully processed component_usage

🔧 Processing table: error_logs
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed error_logs

🔧 Processing table: kanban_boards
   - Backfill via: created_by
   - Row count: 1
   ℹ️  church_id column already exists
   ✓ Backfilling church_id from created_by...
   ✓ Updated 0 rows with church_id
   ⚠️  kanban_boards: Only 0/1 rows have church_id
   ✅ Successfully processed kanban_boards

🔧 Processing table: kanban_board_members
   - Backfill via: user_id
   - Row count: 1
   ℹ️  church_id column already exists
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  kanban_board_members: Only 0/1 rows have church_id
   ✅ Successfully processed kanban_board_members

🔧 Processing table: kanban_tasks
   - Backfill via: created_by
   - Row count: 0
   ℹ️  church_id column already exists
   ✅ Successfully processed kanban_tasks

🔧 Processing table: kanban_task_activity
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed kanban_task_activity

🔧 Processing table: kanban_task_comments
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed kanban_task_comments

🔧 Processing table: notes
   - Backfill via: created_by
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed notes

🔧 Processing table: notifications
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed notifications

🔧 Processing table: notification_history
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed notification_history

🔧 Processing table: notification_queue
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed notification_queue

🔧 Processing table: notification_subscriptions
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed notification_subscriptions

🔧 Processing table: omai_logs
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed omai_logs

🔧 Processing table: omb_templates
   - Backfill via: created_by
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed omb_templates

🔧 Processing table: password_resets
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed password_resets

🔧 Processing table: push_subscriptions
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed push_subscriptions

🔧 Processing table: questionnaire_responses
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed questionnaire_responses

🔧 Processing table: refresh_tokens
   - Backfill via: user_id
   - Row count: 3
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  refresh_tokens: Only 0/3 rows have church_id
   ✅ Successfully processed refresh_tokens

🔧 Processing table: sessions
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ❌ Error processing sessions: Unknown column 'id' in 'sessions'

🔧 Processing table: social_media
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed social_media

🔧 Processing table: social_reactions
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed social_reactions

🔧 Processing table: task_activity_log
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed task_activity_log

🔧 Processing table: user_activity_logs
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed user_activity_logs

🔧 Processing table: user_component_summary
   - Backfill via: user_id
   - Row count: 61
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  user_component_summary: Only 0/61 rows have church_id
   ✅ Successfully processed user_component_summary

🔧 Processing table: user_notification_preferences
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed user_notification_preferences

🔧 Processing table: user_profiles
   - Backfill via: user_id
   - Row count: 1
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  user_profiles: Only 0/1 rows have church_id
   ✅ Successfully processed user_profiles

🔧 Processing table: user_sessions
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed user_sessions

🔧 Processing table: user_sessions_social
   - Backfill via: user_id
   - Row count: 0
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✅ Successfully processed user_sessions_social

🔧 Processing table: user_social_settings
   - Backfill via: user_id
   - Row count: 1
   ℹ️  church_id column already exists
   ⚠️  Wrong data type: bigint, fixing...
   - Dropping incorrect church_id column
   ✓ Adding church_id column...
   ✓ Adding index...
   ✓ Adding foreign key constraint...
   ✓ Backfilling church_id from user_id...
   ✓ Updated 0 rows with church_id
   ⚠️  user_social_settings: Only 0/1 rows have church_id
   ✅ Successfully processed user_social_settings

============================================================
📈 SUMMARY
============================================================
✅ Successfully processed: 38 tables
❌ Failed: 1 tables
⚠️  Warnings: 7

❌ Failed tables:
   - sessions: Unknown column 'id' in 'sessions'

⚠️  Warnings:
   - component_usage: Only 0/908 rows have church_id
   - kanban_boards: Only 0/1 rows have church_id
   - kanban_board_members: Only 0/1 rows have church_id
   - refresh_tokens: Only 0/3 rows have church_id
   - user_component_summary: Only 0/61 rows have church_id
   - user_profiles: Only 0/1 rows have church_id
   - user_social_settings: Only 0/1 rows have church_id

📄 Full results saved to: /var/www/orthodoxmetrics/prod/audit/church_id_application_results.json
