[0;35m2025-07-22 03:48:55 - ========================================[0m
[0;35m2025-07-22 03:48:55 - OrthodoxMetrics API v2 Deployment Started[0m
[0;35m2025-07-22 03:48:55 - ========================================[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è Checking prerequisites...[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è PM2 detected - will use for process management[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è MySQL client available for database tests[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ Prerequisites check completed[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è Creating backup of current state...[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ Backup created at: /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/backups/20250722_034855[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è Validating refactored files...[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ churches.js has been refactored for API v2[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ auth.js has been enhanced with session debugging[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è Checking JavaScript syntax...[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ churches.js syntax is valid[0m
[0;32m2025-07-22 03:48:55 - ‚úÖ auth.js syntax is valid[0m
[0;34m2025-07-22 03:48:55 - ‚ÑπÔ∏è Restarting server to apply changes...[0m
[1;33m2025-07-22 03:48:56 - ‚ö†Ô∏è PM2 process 'orthodox-server' not found, attempting manual restart[0m
[0;31m2025-07-22 03:48:57 - ERROR: Failed to start with PM2[0m
[1;33m2025-07-22 03:48:57 - ‚ö†Ô∏è Deployment failed - consider restoring from backup if needed[0m
[0;34m2025-07-22 03:48:57 - ‚ÑπÔ∏è Backup location: /var/www/orthodox-church-mgmt/orthodoxmetrics/prod/server/backups/20250722_034855[0m
2025-07-22 03:52:46 - ========================================
2025-07-22 03:52:46 - OrthodoxMetrics API v2 Deployment Started (Fixed Version)
2025-07-22 03:52:46 - ========================================
2025-07-22 03:52:46 - ‚ÑπÔ∏è Checking prerequisites...
2025-07-22 03:52:46 - ‚ÑπÔ∏è PM2 detected - will use for process management
2025-07-22 03:52:46 - ‚ÑπÔ∏è Current PM2 processes:
2025-07-22 03:52:46 - ‚ÑπÔ∏è MySQL client available for database tests
2025-07-22 03:52:46 - ‚úÖ Prerequisites check completed
2025-07-22 03:52:46 - ‚ÑπÔ∏è Running in test-only mode
2025-07-22 03:52:46 - ‚ÑπÔ∏è Running comprehensive API v2 tests...
2025-07-22 03:52:46 - ‚ÑπÔ∏è Testing server health...
2025-07-22 03:52:46 - ‚úÖ Server is responding to health checks
2025-07-22 03:52:46 - ‚ÑπÔ∏è Testing session and authentication endpoints...
2025-07-22 03:52:47 - ‚ÑπÔ∏è Session debug endpoint returned status: 500 (may be normal if route not exposed)
2025-07-22 03:52:47 - ‚úÖ Auth check endpoint is responding correctly (status: 401)
2025-07-22 03:52:47 - ‚ÑπÔ∏è Testing refactored churches API...
2025-07-22 03:52:47 - ‚ö†Ô∏è Churches API returned unexpected status: 200 (expected 401)
2025-07-22 03:52:47 - ‚ÑπÔ∏è Testing database connectivity...
2025-07-22 03:52:47 - ‚úÖ Database connectivity test passed
2025-07-22 03:52:47 - ‚úÖ Comprehensive testing completed
2025-07-22 03:52:47 - ========================================
2025-07-22 03:52:47 - API v2 Deployment Completed!
2025-07-22 03:52:47 - ========================================
2025-07-22 03:52:47 - ‚ÑπÔ∏è Next steps:
2025-07-22 03:55:32 - ========================================
2025-07-22 03:55:32 - OrthodoxMetrics API v2 Deployment Started (Fixed Version)
2025-07-22 03:55:32 - ========================================
2025-07-22 03:55:32 - ‚ÑπÔ∏è Checking prerequisites...
2025-07-22 03:55:32 - ‚ÑπÔ∏è PM2 detected - will use for process management
2025-07-22 03:55:32 - ‚ÑπÔ∏è Current PM2 processes:
2025-07-22 03:55:32 - ‚ÑπÔ∏è MySQL client available for database tests
2025-07-22 03:55:32 - ‚úÖ Prerequisites check completed
2025-07-22 03:55:32 - ‚ÑπÔ∏è Running in test-only mode
2025-07-22 03:55:32 - ‚ÑπÔ∏è Running comprehensive API v2 tests...
2025-07-22 03:55:32 - ‚ÑπÔ∏è Testing server health...
2025-07-22 03:55:32 - ‚úÖ Server is responding to health checks
2025-07-22 03:55:32 - ‚ÑπÔ∏è Testing session and authentication endpoints...
2025-07-22 03:55:32 - ‚ÑπÔ∏è Session debug endpoint returned status: 500 (may be normal if route not exposed)
2025-07-22 03:55:33 - ‚úÖ Auth check endpoint is responding correctly (status: 401)
2025-07-22 03:55:33 - ‚ÑπÔ∏è Testing refactored churches API...
2025-07-22 03:55:33 - ‚úÖ Churches API correctly requires authentication
2025-07-22 03:55:33 - ‚ÑπÔ∏è Response format check skipped (jq not available)
2025-07-22 03:55:33 - ‚ÑπÔ∏è Testing database connectivity...
2025-07-22 03:55:33 - ‚úÖ Database connectivity test passed
2025-07-22 03:55:33 - ‚úÖ Comprehensive testing completed
2025-07-22 03:55:33 - ========================================
2025-07-22 03:55:33 - API v2 Deployment Completed!
2025-07-22 03:55:33 - ========================================
2025-07-22 03:55:33 - ‚ÑπÔ∏è Next steps:
