-- Migration for <%= component.dbTable %> table
-- Generated by OMAI from prompt: <%= prompt %>
-- Generated on: <%= new Date().toISOString() %>

CREATE TABLE IF NOT EXISTS <%= component.dbTable %> (
  <% fields.forEach((field, index) => { %>
  <%= field.name %> <%= getSqlType(field.type) %><%= field.required ? ' NOT NULL' : '' %><%= index < fields.length - 1 ? ',' : '' %>
  <% }); %>
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Add indexes for better performance
<% fields.filter(f => f.name === 'id' || f.name === 'created_at' || f.name === 'status').forEach(field => { %>
CREATE INDEX idx_<%= component.dbTable %>_<%= field.name %> ON <%= component.dbTable %>(<%= field.name %>);
<% }); %>

-- Insert sample data (optional)
-- INSERT INTO <%= component.dbTable %> (<% fields.filter(f => f.name !== 'id' && f.name !== 'created_at' && f.name !== 'updated_at').forEach((field, index) => { %><%= field.name %><%= index < fields.filter(f => f.name !== 'id' && f.name !== 'created_at' && f.name !== 'updated_at').length - 1 ? ', ' : '' %><% }); %>) VALUES 
-- (<% fields.filter(f => f.name !== 'id' && f.name !== 'created_at' && f.name !== 'updated_at').forEach((field, index) => { %>'<%= getSampleValue(field.type) %>'<%= index < fields.filter(f => f.name !== 'id' && f.name !== 'created_at' && f.name !== 'updated_at').length - 1 ? ', ' : '' %><% }); %>); 