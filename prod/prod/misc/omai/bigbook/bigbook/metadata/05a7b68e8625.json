{
  "id": "05a7b68e8625",
  "originalPath": "/var/www/orthodox-church-mgmt/orthodoxmetrics/prod/fix-calendar-schema.sh",
  "relativePath": "fix-calendar-schema.sh",
  "name": "fix-calendar-schema.sh",
  "extension": ".sh",
  "size": 1982,
  "modified": "2025-07-23T21:04:41.678Z",
  "created": "2025-07-23T21:04:36.186Z",
  "classification": {
    "type": "Troubleshooting Utilities",
    "category": "Diagnostic Tools",
    "confidence": 2
  },
  "metadata": {
    "fileStats": {
      "lines": 76,
      "characters": 1980,
      "words": 238
    },
    "classification": {
      "type": "Troubleshooting Utilities",
      "category": "Diagnostic Tools",
      "confidence": 2
    },
    "dependencies": [],
    "security": {
      "findings": [
        {
          "type": "sensitive_data",
          "pattern": "(?:password|pwd|pass)\\s*[:=]\\s*['\"]([^'\"]+)['\"]",
          "line": 41,
          "redacted": true
        }
      ],
      "hasSecurityIssues": true,
      "redactedContent": "#!/bin/bash\n\n# OrthodoxMetrics Calendar System Database Schema Fix\necho \"ðŸ”§ Fixing OrthodoxMetrics Calendar Database Schema...\"\n\n# Colors for output\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # No Color\n\nprint_status() {\n    echo -e \"${BLUE}[INFO]${NC} $1\"\n}\n\nprint_success() {\n    echo -e \"${GREEN}[SUCCESS]${NC} $1\"\n}\n\nprint_error() {\n    echo -e \"${RED}[ERROR]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[WARNING]${NC} $1\"\n}\n\n# Check if schema file exists\nif [ ! -f \"server/calendar-schema.sql\" ]; then\n    print_error \"Calendar schema file not found: server/calendar-schema.sql\"\n    exit 1\nfi\n\nprint_status \"Calendar schema file found. Creating database schema...\"\n\n# Get database credentials\nread -p \"Enter MySQL username (default: orthodoxapps): \" DB_USER\nDB_USER=${DB_USER:-orthodoxapps}\n\nread -s -p \"Enter MySQL password: \"[REDACTED]\"\"\n\nread -p \"Enter MySQL host (default: localhost): \" DB_HOST\nDB_HOST=${DB_HOST:-localhost}\n\nread -p \"Enter database name (default: orthodoxmetrics_db): \" DB_NAME\nDB_NAME=${DB_NAME:-orthodoxmetrics_db}\n\nprint_status \"Creating calendar database schema...\"\n\n# Create the schema\nmysql -u \"$DB_USER\" -p\"$DB_PASS\" -h \"$DB_HOST\" \"$DB_NAME\" < server/calendar-schema.sql\n\nif [ $? -eq 0 ]; then\n    print_success \"Database schema created successfully!\"\n    \n    # Verify the tables were created\n    print_status \"Verifying tables...\"\n    mysql -u \"$DB_USER\" -p\"$DB_PASS\" -h \"$DB_HOST\" \"$DB_NAME\" -e \"\n    SHOW TABLES LIKE 'ai_%';\n    SHOW TABLES LIKE 'task_%';\n    SHOW TABLES LIKE 'kanban_%';\n    SHOW TABLES LIKE 'calendar_%';\n    SHOW TABLES LIKE 'chatgpt_%';\n    \" 2>/dev/null\n    \n    print_success \"Calendar database schema setup completed!\"\n    echo \"\"\n    echo \"Next steps:\"\n    echo \"1. Run the full setup: ./setup-calendar-system.sh\"\n    echo \"2. Or start the system: ./start-calendar-system.sh (if it exists)\"\nelse\n    print_error \"Failed to create database schema\"\n    exit 1\nfi "
    },
    "complexity": {
      "totalLines": 76,
      "codeLines": 52,
      "commentLines": 7,
      "commentRatio": 0.11864406779661017,
      "averageLineLength": 32.152542372881356
    },
    "lastAnalyzed": "2025-07-26T04:17:09.799Z"
  },
  "contentHash": "a12aea3fbf1fa9ffd9e1dc48ad1ce0aef30414d2e43041348fe3ca643b7c3ded",
  "discoveredAt": "2025-07-26T04:17:09.799Z"
}